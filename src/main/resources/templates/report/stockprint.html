<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" >
<head>
  <title>SKLAD ASTATKA</title>
  <th:block th:insert="parts/webjars :: webjars"></th:block>
  <th:block th:insert="parts/static :: static"></th:block>
</head>
<body>
<style th:inline="css">
  .sii{
    padding-left: 15px;
    padding-right: 5px;
    border: 1px solid;
  }
</style>


<main class="main" >
  <table class="" style="margin-left: 80px; border: 1px; " id="tab">
        <thead>
        <h6 class="" style="margin-left: 80px">MAVJUD YUKLAR RO'YHATI</h6>
        <tr>
          <th class="sii" >ID:</th>
          <th class="sii" >MAHSULOT NOMI</th>
          <th class="sii" >RANG/MM</th>
          <th class="sii" >GRAMM</th>
          <th class="sii" >M2</th>
          <th class="sii" >OG'IRLIK/...</th>
          <th class="sii" >DONASI</th>
          <th class="sii" >PACHKA/RULON</th>
        </tr>
        </thead>
        <tbody>
        <th:block th:each="event : ${events}" >
          <tr>
            <td class="sii" th:text="${event.getId()}"></td>
            <td class="sii" th:text="${event.getProduct().getName()}"></td>
            <td class="sii" th:text="${event.getProduct().getColor().getName()}"></td>
            <td class="sii" th:text="${event.getProduct().getGramm().getWeight()}"></td>
            <td id="m2" class="sii" th:text="${#numbers.formatDecimal(event.getM2(), 0, 2)}" ></td>
            <td id="weight" class="sii" th:text="${event.getWeight()}"></td>
            <td id="piece" class="sii" th:text="${event.getPieces()}"></td>
            <td id="count" class="sii" th:text="${event.getCount()}"></td>
          </tr>
        </th:block>

  </table>
  <script type="text/javascript">
    $(function() {
      $("#subtotal").html(sumColumn(4));
      $("#total").html(sumColumn(5));
    });

    function sumColumn(index) {
      var total = 0;
      $("td:nth-child(" + index + ")").each(function() {
        total += parseInt($(this).text(), 10) || 0;
      });
      return total;
    }


    $(document).ready(function() {
      Sub();
    });
    function Sub(){
      m2=(document.getElementById('m2').value);
      weight=parseFloat(document.getElementById('weight').value);
      piece=parseFloat(document.getElementById('piece').value);
      count=parseFloat(document.getElementById('count').value);

      var newTable = document.getElementById('tab');
      var row = newTable.insertRow(-1);
      var cell1 = row.insertCell(0);
      var cell2 = row.insertCell(0);
      var cell3 = row.insertCell(0);
      var cell4 = row.insertCell(0);
      cell1.innerHTML = m2;
      cell4.innerHTML = weight;
      cell3.innerHTML = piece;
      cell2.innerHTML = count;

    }
  </script>
</main>
</body>
</html>